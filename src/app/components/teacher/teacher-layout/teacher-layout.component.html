<div class="d-flex vh-100 bg-light">

  <aside class="teacher-sidebar d-flex flex-column text-white shadow">
    <div class="sidebar-header text-center p-4 border-bottom border-light border-opacity-25">
      <i class="bi bi-mortarboard-fill display-6 mb-2"></i>
      <h6 class="m-0 fw-bold">Gestión de Refuerzos Académicos</h6>
    </div>

    <ul class="nav nav-pills flex-column mb-auto p-3 gap-2">
      <li class="nav-item">
        <a routerLink="/teacher/dashboard" routerLinkActive="active-link" class="nav-link text-white">
          <i class="bi bi-boxes"></i>⠀Dashboard
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/teacher/availability" routerLinkActive="active-link" class="nav-link text-white">
          <i class="bi bi-calendar2-week me-2"></i> Disponibilidad
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/teacher/requests" routerLinkActive="active-link" class="nav-link text-white">
          <i class="bi bi-inbox me-2"></i> Solicitudes
        </a>
      </li>
    </ul>
  </aside>

  <div class="flex-grow-1 d-flex flex-column content-area">

    <header class="top-header bg-white shadow-sm p-3 d-flex justify-content-between align-items-center z-1">
      <h5 class="m-0 text-secondary fw-semibold header-title"></h5>

      <!-- Profile Dropdown -->
      <div class="position-relative">
        <button type="button" class="btn btn-profile d-flex align-items-center gap-2" (click)="toggleDropdown()">
          <span class="fw-medium text-dark d-none d-md-inline">{{ userName }}</span>
          <div class="teacher-avatar rounded-circle text-white d-flex justify-content-center align-items-center">
            <span class="fw-bold">{{ userInitials }}</span>
          </div>
          <i class="bi bi-chevron-down text-muted small"></i>
        </button>

        @if (showDropdown) {
        <div class="profile-dropdown shadow-sm border">
          <div class="dropdown-header px-3 py-2 border-bottom">
            <p class="fw-bold mb-0 small">{{ userName }}</p>
            <small class="text-muted">Docente</small>
          </div>
          <button type="button" class="dropdown-item text-danger d-flex align-items-center gap-2 px-3 py-2"
            (click)="logout()">
            <i class="bi bi-box-arrow-left"></i> Cerrar sesión
          </button>
        </div>
        <!-- Backdrop to close dropdown on outside click -->
        <div class="dropdown-backdrop" (click)="closeDropdown()"></div>
        }
      </div>
    </header>

    <main class="flex-grow-1 p-4 overflow-auto">
      <router-outlet></router-outlet>
    </main>

  </div>
</div>