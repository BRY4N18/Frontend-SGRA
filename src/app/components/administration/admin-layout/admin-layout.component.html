<div class="d-flex vh-100 bg-light">

  <aside class="admin-sidebar d-flex flex-column text-white shadow" [class.collapsed]="isSidebarCollapsed()"
        aria-label="Navegación principal">

    <div class="sidebar-header text-center p-4 border-bottom border-light border-opacity-25">
      <i class="bi bi-mortarboard-fill display-6 mb-2"></i>
      <div class="brand-text">
        <h6 class="m-0 fw-bold">Gestión de refuerzos académicos</h6>
      </div>
    </div>

    <nav aria-label="Menú de administración">
      <ul class="nav nav-pills flex-column mb-auto p-3 gap-2">
        @for (item of navItems; track item.path) {
          <li class="nav-item">
            <a [routerLink]="item.path" routerLinkActive="active-link"
              class="nav-link text-white d-flex align-items-center"
              [attr.aria-label]="item.label">
              <i class="bi {{ item.icon }} nav-icon"></i>
              <span class="nav-label">{{ item.label }}</span>
            </a>
          </li>
        }
      </ul>
    </nav>

    <div class="p-3 border-top border-light border-opacity-25 mt-auto">
      <button type="button" (click)="logout()"
              class="btn btn-logout text-white w-100 text-start d-flex align-items-center nav-link logout-link"
              aria-label="Cerrar sesión">
        <i class="bi bi-box-arrow-left nav-icon"></i>
        <span class="nav-label">Cerrar Sesión</span>
      </button>
    </div>
  </aside>

  <div class="flex-grow-1 d-flex flex-column overflow-hidden">

    <header class="bg-white shadow-sm p-3 d-flex justify-content-between align-items-center z-1">
      <div class="d-flex align-items-center gap-3">
        <button type="button" class="btn btn-toggle-sidebar" (click)="toggleSidebar()"
                aria-label="Contraer o expandir menú lateral">
          <i class="bi bi-list fs-5"></i>
        </button>
        <h5 class="m-0 text-secondary fw-semibold d-none d-md-block">
          SGRA | Sistema de Gestión de Refuerzos Académicos
        </h5>
      </div>

      <div class="d-flex align-items-center gap-3">

        <div class="dropdown">
          <button type="button"
                  class="btn btn-profile d-flex align-items-center gap-2 border-0"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                  aria-haspopup="true"
                  aria-label="Menú de usuario">
            <div class="user-avatar rounded-circle text-white d-flex justify-content-center align-items-center shadow-sm">
              {{ userInitials() }}
            </div>
            <div class="d-none d-sm-block text-start">
              <span class="fw-medium text-dark d-block lh-1">{{ userName() }}</span>
              <small class="text-muted">{{ userRoleLabel() }}</small>
            </div>
            <i class="bi bi-chevron-down text-muted"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end shadow-sm" role="menu">
            <li role="none">
              <button class="dropdown-item text-danger" type="button" (click)="logout()" role="menuitem">
                <i class="bi bi-box-arrow-left me-2"></i>Cerrar Sesión
              </button>
            </li>
          </ul>
        </div>
      </div>
    </header>

    <main class="flex-grow-1 p-4 overflow-auto">
      <router-outlet></router-outlet>
    </main>

  </div>
</div>
